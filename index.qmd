---
title: "Data Science for Public Policy"
subtitle: "Assignment 04"
author: "Troy Cheng - yc1317; Caroline Atuhaire - ca975"
execute:
  warning: false
format:
  html:
    embed-resources: true
    toc: true
    toc-location: left
---

# Set Up Packages

```{r}
# install.packages(c("readxl", "writexl")

library(readxl)
library(writexl)
library(tidyverse)
library(tibble)

```

# Transfer the Data Format

```{r}
# Read Original File and Assign it to "data" 

data <- read_excel("data/0_OriginData_World_Development_Indicators.xlsx")

# Pivot longer to convert year columns into a "Year" column

data_long <- data |>
  pivot_longer(
    cols = starts_with("20"), 
    # Select all year columns (2001-2023)
    names_to = "Year",          
    # Move column names to "Year"
    values_to = "Value"
    # Store data values in "Value"
    )        

# Drop NAs contained by these cols

data_long <- data_long |>
  drop_na(`Country Name`, `Country Code`, `Series Code`, `Series Name`)

# Convert Year column to numeric

data_long$Year <- as.numeric(str_extract(data_long$Year, "\\d+"))

# Pivot wider to make Series Name values into separate columns

data_clean <- data_long |>
  select(-"Series Code") |>
  # delete the "Series Code" column
  pivot_wider(names_from = "Series Name", 
              values_from = "Value")

```

Here, we delete the "Series Code" column, because all the values in it have corresponding value in column "Series Name". If we don't delete it, all values of the variables would be misaligned and lots of blank rows when pivot_wider using "Series Name".

```{r}
# Save the data as an Excel file

# write_xlsx(data_clean, "data/1_world_bank_data_clean.xlsx")

```

## Select and Rename Data with Few NAs

After taking a glimpse of *world_bank_data_clean.xlsx*, we selected the variables with few NAs manually and renamed them in R:

```{r}
# Define short names for selected variables
data_available <- data_clean %>%
  select(
    country_name                = `Country Name`,
    country_code                = `Country Code`,
    year                        = `Year`,
    changes_inventories         = `Changes in inventories (constant LCU)`,
    cfw_female                  = `Contributing family workers, female (% of female employment) (modeled ILO estimate)`,
    cfw_male                    = `Contributing family workers, male (% of male employment) (modeled ILO estimate)`,
    cfw_total                   = `Contributing family workers, total (% of total employment) (modeled ILO estimate)`,
    employers_female            = `Employers, female (% of female employment) (modeled ILO estimate)`,
    employers_male              = `Employers, male (% of male employment) (modeled ILO estimate)`,
    employers_total             = `Employers, total (% of total employment) (modeled ILO estimate)`,
    empl_agri                 = `Employment in agriculture (% of total employment) (modeled ILO estimate)`,
    empl_agri_female          = `Employment in agriculture, female (% of female employment) (modeled ILO estimate)`,
    empl_agri_male            = `Employment in agriculture, male (% of male employment) (modeled ILO estimate)`,
    empl_industry             = `Employment in industry (% of total employment) (modeled ILO estimate)`,
    empl_industry_female      = `Employment in industry, female (% of female employment) (modeled ILO estimate)`,
    empl_industry_male        = `Employment in industry, male (% of male employment) (modeled ILO estimate)`,
    empl_services             = `Employment in services (% of total employment) (modeled ILO estimate)`,
    empl_services_female      = `Employment in services, female (% of female employment) (modeled ILO estimate)`,
    empl_services_male        = `Employment in services, male (% of male employment) (modeled ILO estimate)`,
    emp_pop_15plus_female_milo  = `Employment to population ratio, 15+, female (%) (modeled ILO estimate)`,
    emp_pop_15plus_female_nat   = `Employment to population ratio, 15+, female (%) (national estimate)`,
    emp_pop_15plus_male_milo    = `Employment to population ratio, 15+, male (%) (modeled ILO estimate)`,
    emp_pop_15plus_male_nat     = `Employment to population ratio, 15+, male (%) (national estimate)`,
    emp_pop_15plus_total_milo   = `Employment to population ratio, 15+, total (%) (modeled ILO estimate)`,
    emp_pop_15plus_total_nat    = `Employment to population ratio, 15+, total (%) (national estimate)`,
    emp_pop_15_24_female_milo   = `Employment to population ratio, ages 15-24, female (%) (modeled ILO estimate)`,
    emp_pop_15_24_female_nat    = `Employment to population ratio, ages 15-24, female (%) (national estimate)`,
    emp_pop_15_24_male_milo     = `Employment to population ratio, ages 15-24, male (%) (modeled ILO estimate)`,
    emp_pop_15_24_male_nat      = `Employment to population ratio, ages 15-24, male (%) (national estimate)`,
    emp_pop_15_24_total_milo    = `Employment to population ratio, ages 15-24, total (%) (modeled ILO estimate)`,
    emp_pop_15_24_total_nat     = `Employment to population ratio, ages 15-24, total (%) (national estimate)`,
    exports_growth              = `Exports of goods and services (annual % growth)`,
    exports_const               = `Exports of goods and services (constant LCU)`,
    final_cons_growth           = `Final consumption expenditure (annual % growth)`,
    final_cons_const            = `Final consumption expenditure (constant LCU)`,
    gdp_const                   = `GDP (constant LCU)`,
    gdp_growth                  = `GDP growth (annual %)`,
    gdp_percap_const            = `GDP per capita (constant LCU)`,
    gdp_percap_growth           = `GDP per capita growth (annual %)`,
    gdp_per_person_employed     = `GDP per person employed (constant 2021 PPP $)`,
    gov_final_cons_growth       = `General government final consumption expenditure (annual % growth)`,
    gov_final_cons_const        = `General government final consumption expenditure (constant LCU)`,
    gni_const                   = `GNI (constant LCU)`,
    gni_growth                  = `GNI growth (annual %)`,
    gni_percap_const            = `GNI per capita (constant LCU)`,
    gni_percap_growth           = `GNI per capita growth (annual %)`,
    gov_exp_edu_pct_gdp         = `Government expenditure on education, total (% of GDP)`,
    gov_exp_edu_pct_gov         = `Government expenditure on education, total (% of government expenditure)`,
    gross_capital_growth        = `Gross capital formation (annual % growth)`,
    gross_capital_const         = `Gross capital formation (constant LCU)`,
    gross_fixed_capital_growth  = `Gross fixed capital formation (annual % growth)`,
    gross_fixed_capital_const   = `Gross fixed capital formation (constant LCU)`,
    gross_national_expenditure  = `Gross national expenditure (constant LCU)`,
    households_cons_growth      = `Households and NPISHs Final consumption expenditure (annual % growth)`,
    households_cons_const       = `Households and NPISHs Final consumption expenditure (constant LCU)`,
    households_cons_percap_growth = `Households and NPISHs Final consumption expenditure per capita growth (annual %)`,
    imports_growth              = `Imports of goods and services (annual % growth)`,
    imports_const               = `Imports of goods and services (constant LCU)`,
    lfpr_15_24_female_milo      = `Labor force participation rate for ages 15-24, female (%) (modeled ILO estimate)`,
    lfpr_15_24_female_nat       = `Labor force participation rate for ages 15-24, female (%) (national estimate)`,
    lfpr_15_24_male_milo        = `Labor force participation rate for ages 15-24, male (%) (modeled ILO estimate)`,
    lfpr_15_24_male_nat         = `Labor force participation rate for ages 15-24, male (%) (national estimate)`,
    lfpr_15_24_total_milo       = `Labor force participation rate for ages 15-24, total (%) (modeled ILO estimate)`,
    lfpr_15_24_total_nat        = `Labor force participation rate for ages 15-24, total (%) (national estimate)`,
    lfpr_female_15plus_milo      = `Labor force participation rate, female (% of female population ages 15+) (modeled ILO estimate)`,
    lfpr_female_15plus_nat       = `Labor force participation rate, female (% of female population ages 15+) (national estimate)`,
    lfpr_female_15_64_milo       = `Labor force participation rate, female (% of female population ages 15-64) (modeled ILO estimate)`,
    lfpr_male_15plus_milo        = `Labor force participation rate, male (% of male population ages 15+) (modeled ILO estimate)`,
    lfpr_male_15plus_nat         = `Labor force participation rate, male (% of male population ages 15+) (national estimate)`,
    lfpr_male_15_64_milo         = `Labor force participation rate, male (% of male population ages 15-64) (modeled ILO estimate)`,
    lfpr_total_15plus_milo       = `Labor force participation rate, total (% of total population ages 15+) (modeled ILO estimate)`,
    lfpr_total_15plus_nat        = `Labor force participation rate, total (% of total population ages 15+) (national estimate)`,
    lfpr_total_15_64_milo        = `Labor force participation rate, total (% of total population ages 15-64) (modeled ILO estimate)`,
    lf_adv_edu_total            = `Labor force with advanced education (% of total working-age population with advanced education)`,
    lf_adv_edu_female           = `Labor force with advanced education, female (% of female working-age population with advanced education)`,
    lf_adv_edu_male             = `Labor force with advanced education, male (% of male working-age population with advanced education)`,
    lf_basic_edu_total          = `Labor force with basic education (% of total working-age population with basic education)`,
    lf_basic_edu_female         = `Labor force with basic education, female (% of female working-age population with basic education)`,
    lf_basic_edu_male           = `Labor force with basic education, male (% of male working-age population with basic education)`,
    lf_intermediate_edu_total   = `Labor force with intermediate education (% of total working-age population with intermediate education)`,
    lf_intermediate_edu_female  = `Labor force with intermediate education, female (% of female working-age population with intermediate education)`,
    lf_intermediate_edu_male    = `Labor force with intermediate education, male (% of male working-age population with intermediate education)`,
    labor_female_pct            = `Labor force, female (% of total labor force)`,
    labor_total                 = `Labor force, total`,
    part_time_female            = `Part time employment, female (% of total female employment)`,
    part_time_male              = `Part time employment, male (% of total male employment)`,
    part_time_total             = `Part time employment, total (% of total employment)`,
    ratio_lfpr_female_male_milo = `Ratio of female to male labor force participation rate (%) (modeled ILO estimate)`,
    ratio_lfpr_female_male_nat  = `Ratio of female to male labor force participation rate (%) (national estimate)`,
    self_employed_female        = `Self-employed, female (% of female employment) (modeled ILO estimate)`,
    self_employed_male          = `Self-employed, male (% of male employment) (modeled ILO estimate)`,
    self_employed_total         = `Self-employed, total (% of total employment) (modeled ILO estimate)`,
    youth_not_in_edu_female     = `Share of youth not in education, employment or training, female (% of female youth population)`,
    youth_not_in_edu_male       = `Share of youth not in education, employment or training, male (% of male youth population)`,
    youth_not_in_edu_total      = `Share of youth not in education, employment or training, total (% of youth population)`,
    unemp_adv_edu_total         = `Unemployment with advanced education (% of total labor force with advanced education)`,
    unemp_adv_edu_female        = `Unemployment with advanced education, female (% of female labor force with advanced education)`,
    unemp_adv_edu_male          = `Unemployment with advanced education, male (% of male labor force with advanced education)`,
    unemp_basic_edu_total       = `Unemployment with basic education (% of total labor force with basic education)`,
    unemp_basic_edu_female      = `Unemployment with basic education, female (% of female labor force with basic education)`,
    unemp_basic_edu_male        = `Unemployment with basic education, male (% of male labor force with basic education)`,
    unemp_inter_edu_total       = `Unemployment with intermediate education (% of total labor force with intermediate education)`,
    unemp_inter_edu_female      = `Unemployment with intermediate education, female (% of female labor force with intermediate education)`,
    unemp_inter_edu_male        = `Unemployment with intermediate education, male (% of male labor force with intermediate education)`,
    unemp_female_milo           = `Unemployment, female (% of female labor force) (modeled ILO estimate)`,
    unemp_female_nat            = `Unemployment, female (% of female labor force) (national estimate)`,
    unemp_male_milo             = `Unemployment, male (% of male labor force) (modeled ILO estimate)`,
    unemp_male_nat              = `Unemployment, male (% of male labor force) (national estimate)`,
    unemp_total_milo            = `Unemployment, total (% of total labor force) (modeled ILO estimate)`,
    unemp_total_nat             = `Unemployment, total (% of total labor force) (national estimate)`,
    unemp_youth_female_milo     = `Unemployment, youth female (% of female labor force ages 15-24) (modeled ILO estimate)`,
    unemp_youth_female_nat      = `Unemployment, youth female (% of female labor force ages 15-24) (national estimate)`,
    unemp_youth_male_milo       = `Unemployment, youth male (% of male labor force ages 15-24) (modeled ILO estimate)`,
    unemp_youth_male_nat        = `Unemployment, youth male (% of male labor force ages 15-24) (national estimate)`,
    unemp_youth_total_milo      = `Unemployment, youth total (% of total labor force ages 15-24) (modeled ILO estimate)`,
    unemp_youth_total_nat       = `Unemployment, youth total (% of total labor force ages 15-24) (national estimate)`,
    vulnerable_emp_female       = `Vulnerable employment, female (% of female employment) (modeled ILO estimate)`,
    vulnerable_emp_male         = `Vulnerable employment, male (% of male employment) (modeled ILO estimate)`,
    vulnerable_emp_total        = `Vulnerable employment, total (% of total employment) (modeled ILO estimate)`,
    wage_workers_female         = `Wage and salaried workers, female (% of female employment) (modeled ILO estimate)`,
    wage_workers_male           = `Wage and salaried workers, male (% of male employment) (modeled ILO estimate)`,
    wage_workers_total          = `Wage and salaried workers, total (% of total employment) (modeled ILO estimate)`
  )

```

Use **glimpse(data_available)** to see our new dataset. Now our problem is all variables that should be numeric are strings.

```{r}
# Mutate the chr into numeric
data_available_clean <- data_available |> 
  mutate(across(-c(country_name, country_code, year), as.numeric))

```
Create Codebook

```{r}

codebook <- tribble(
  ~new_variable,                    ~original_variable,                                                    
  "country_name",                   "Country Name",
  "country_code",                   "Country Code",
  "year",                           "Year",
  "changes_inventories",            "Changes in inventories (constant LCU)",
  "cfw_female",                     "Contributing family workers, female (% of female employment) (modeled ILO estimate)",
  "cfw_male",                       "Contributing family workers, male (% of male employment) (modeled ILO estimate)",
  "cfw_total",                      "Contributing family workers, total (% of total employment) (modeled ILO estimate)",
  "employers_female",               "Employers, female (% of female employment) (modeled ILO estimate)",
  "employers_male",                 "Employers, male (% of male employment) (modeled ILO estimate)",
  "employers_total",                "Employers, total (% of total employment) (modeled ILO estimate)",
  "empl_agri",                      "Employment in agriculture (% of total employment) (modeled ILO estimate)",
  "empl_agri_female",               "Employment in agriculture, female (% of female employment) (modeled ILO estimate)",
  "empl_agri_male",                 "Employment in agriculture, male (% of male employment) (modeled ILO estimate)",
  "empl_industry",                  "Employment in industry (% of total employment) (modeled ILO estimate)",
  "empl_industry_female",           "Employment in industry, female (% of female employment) (modeled ILO estimate)",
  "empl_industry_male",             "Employment in industry, male (% of male employment) (modeled ILO estimate)",
  "empl_services",                  "Employment in services (% of total employment) (modeled ILO estimate)",
  "empl_services_female",           "Employment in services, female (% of female employment) (modeled ILO estimate)",
  "empl_services_male",             "Employment in services, male (% of male employment) (modeled ILO estimate)",
  "emp_pop_15plus_female_milo",     "Employment to population ratio, 15+, female (%) (modeled ILO estimate)",
  "emp_pop_15plus_female_nat",      "Employment to population ratio, 15+, female (%) (national estimate)",
  "emp_pop_15plus_male_milo",       "Employment to population ratio, 15+, male (%) (modeled ILO estimate)",
  "emp_pop_15plus_male_nat",        "Employment to population ratio, 15+, male (%) (national estimate)",
  "emp_pop_15plus_total_milo",      "Employment to population ratio, 15+, total (%) (modeled ILO estimate)",
  "emp_pop_15plus_total_nat",       "Employment to population ratio, 15+, total (%) (national estimate)",
  "emp_pop_15_24_female_milo",      "Employment to population ratio, ages 15-24, female (%) (modeled ILO estimate)",
  "emp_pop_15_24_female_nat",       "Employment to population ratio, ages 15-24, female (%) (national estimate)",
  "emp_pop_15_24_male_milo",        "Employment to population ratio, ages 15-24, male (%) (modeled ILO estimate)",
  "emp_pop_15_24_male_nat",         "Employment to population ratio, ages 15-24, male (%) (national estimate)",
  "emp_pop_15_24_total_milo",       "Employment to population ratio, ages 15-24, total (%) (modeled ILO estimate)",
  "emp_pop_15_24_total_nat",        "Employment to population ratio, ages 15-24, total (%) (national estimate)",
  "exports_growth",                 "Exports of goods and services (annual % growth)",
  "exports_const",                  "Exports of goods and services (constant LCU)",
  "final_cons_growth",              "Final consumption expenditure (annual % growth)",
  "final_cons_const",               "Final consumption expenditure (constant LCU)",
  "gdp_const",                      "GDP (constant LCU)",
  "gdp_growth",                     "GDP growth (annual %)",
  "gdp_percap_const",               "GDP per capita (constant LCU)",
  "gdp_percap_growth",              "GDP per capita growth (annual %)",
  "gdp_per_person_employed",        "GDP per person employed (constant 2021 PPP $)",
  "gov_final_cons_growth",          "General government final consumption expenditure (annual % growth)",
  "gov_final_cons_const",           "General government final consumption expenditure (constant LCU)",
  "gni_const",                      "GNI (constant LCU)",
  "gni_growth",                     "GNI growth (annual %)",
  "gni_percap_const",               "GNI per capita (constant LCU)",
  "gni_percap_growth",              "GNI per capita growth (annual %)",
  "gov_exp_edu_pct_gdp",            "Government expenditure on education, total (% of GDP)",
  "gov_exp_edu_pct_gov",            "Government expenditure on education, total (% of government expenditure)",
  "gross_capital_growth",           "Gross capital formation (annual % growth)",
  "gross_capital_const",            "Gross capital formation (constant LCU)",
  "gross_fixed_capital_growth",     "Gross fixed capital formation (annual % growth)",
  "gross_fixed_capital_const",      "Gross fixed capital formation (constant LCU)",
  "gross_national_expenditure",     "Gross national expenditure (constant LCU)",
  "households_cons_growth",         "Households and NPISHs Final consumption expenditure (annual % growth)",
  "households_cons_const",          "Households and NPISHs Final consumption expenditure (constant LCU)",
  "households_cons_percap_growth",  "Households and NPISHs Final consumption expenditure per capita growth (annual %)",
  "imports_growth",                 "Imports of goods and services (annual % growth)",
  "imports_const",                  "Imports of goods and services (constant LCU)",
  "lfpr_15_24_female_milo",         "Labor force participation rate for ages 15-24, female (%) (modeled ILO estimate)",
  "lfpr_15_24_female_nat",          "Labor force participation rate for ages 15-24, female (%) (national estimate)",
  "lfpr_15_24_male_milo",           "Labor force participation rate for ages 15-24, male (%) (modeled ILO estimate)",
  "lfpr_15_24_male_nat",            "Labor force participation rate for ages 15-24, male (%) (national estimate)",
  "lfpr_15_24_total_milo",          "Labor force participation rate for ages 15-24, total (%) (modeled ILO estimate)",
  "lfpr_15_24_total_nat",           "Labor force participation rate for ages 15-24, total (%) (national estimate)",
  "lfpr_female_15plus_milo",        "Labor force participation rate, female (% of female population ages 15+) (modeled ILO estimate)",
  "lfpr_female_15plus_nat",         "Labor force participation rate, female (% of female population ages 15+) (national estimate)",
  "lfpr_female_15_64_milo",         "Labor force participation rate, female (% of female population ages 15-64) (modeled ILO estimate)",
  "lfpr_male_15plus_milo",          "Labor force participation rate, male (% of male population ages 15+) (modeled ILO estimate)",
  "lfpr_male_15plus_nat",           "Labor force participation rate, male (% of male population ages 15+) (national estimate)",
  "lfpr_male_15_64_milo",           "Labor force participation rate, male (% of male population ages 15-64) (modeled ILO estimate)",
  "lfpr_total_15plus_milo",         "Labor force participation rate, total (% of total population ages 15+) (modeled ILO estimate)",
  "lfpr_total_15plus_nat",          "Labor force participation rate, total (% of total population ages 15+) (national estimate)",
  "lfpr_total_15_64_milo",          "Labor force participation rate, total (% of total population ages 15-64) (modeled ILO estimate)",
  "lf_adv_edu_total",               "Labor force with advanced education (% of total working-age population with advanced education)",
  "lf_adv_edu_female",              "Labor force with advanced education, female (% of female working-age population with advanced education)",
  "lf_adv_edu_male",                "Labor force with advanced education, male (% of male working-age population with advanced education)",
  "lf_basic_edu_total",             "Labor force with basic education (% of total working-age population with basic education)",
  "lf_basic_edu_female",            "Labor force with basic education, female (% of female working-age population with basic education)",
  "lf_basic_edu_male",              "Labor force with basic education, male (% of male working-age population with basic education)",
  "lf_intermediate_edu_total",      "Labor force with intermediate education (% of total working-age population with intermediate education)",
  "lf_intermediate_edu_female",     "Labor force with intermediate education, female (% of female working-age population with intermediate education)",
  "lf_intermediate_edu_male",       "Labor force with intermediate education, male (% of male working-age population with intermediate education)",
  "labor_female_pct",               "Labor force, female (% of total labor force)",
  "labor_total",                    "Labor force, total",
  "part_time_female",               "Part time employment, female (% of total female employment)",
  "part_time_male",                 "Part time employment, male (% of total male employment)",
  "part_time_total",                "Part time employment, total (% of total employment)",
  "ratio_lfpr_female_male_milo",     "Ratio of female to male labor force participation rate (%) (modeled ILO estimate)",
  "ratio_lfpr_female_male_nat",      "Ratio of female to male labor force participation rate (%) (national estimate)",
  "self_employed_female",           "Self-employed, female (% of female employment) (modeled ILO estimate)",
  "self_employed_male",             "Self-employed, male (% of male employment) (modeled ILO estimate)",
  "self_employed_total",            "Self-employed, total (% of total employment) (modeled ILO estimate)",
  "youth_not_in_edu_female",        "Share of youth not in education, employment or training, female (% of female youth population)",
  "youth_not_in_edu_male",          "Share of youth not in education, employment or training, male (% of male youth population)",
  "youth_not_in_edu_total",         "Share of youth not in education, employment or training, total (% of youth population)",
  "unemp_adv_edu_total",            "Unemployment with advanced education (% of total labor force with advanced education)",
  "unemp_adv_edu_female",           "Unemployment with advanced education, female (% of female labor force with advanced education)",
  "unemp_adv_edu_male",             "Unemployment with advanced education, male (% of male labor force with advanced education)",
  "unemp_basic_edu_total",          "Unemployment with basic education (% of total labor force with basic education)",
  "unemp_basic_edu_female",         "Unemployment with basic education, female (% of female labor force with basic education)",
  "unemp_basic_edu_male",           "Unemployment with basic education, male (% of male labor force with basic education)",
  "unemp_inter_edu_total",          "Unemployment with intermediate education (% of total labor force with intermediate education)",
  "unemp_inter_edu_female",         "Unemployment with intermediate education, female (% of female labor force with intermediate education)",
  "unemp_inter_edu_male",           "Unemployment with intermediate education, male (% of male labor force with intermediate education)",
  "unemp_female_milo",              "Unemployment, female (% of female labor force) (modeled ILO estimate)",
  "unemp_female_nat",               "Unemployment, female (% of female labor force) (national estimate)",
  "unemp_male_milo",                "Unemployment, male (% of male labor force) (modeled ILO estimate)",
  "unemp_male_nat",                 "Unemployment, male (% of male labor force) (national estimate)",
  "unemp_total_milo",               "Unemployment, total (% of total labor force) (modeled ILO estimate)",
  "unemp_total_nat",                "Unemployment, total (% of total labor force) (national estimate)",
  "unemp_youth_female_milo",        "Unemployment, youth female (% of female labor force ages 15-24) (modeled ILO estimate)",
  "unemp_youth_female_nat",         "Unemployment, youth female (% of female labor force ages 15-24) (national estimate)",
  "unemp_youth_male_milo",          "Unemployment, youth male (% of male labor force ages 15-24) (modeled ILO estimate)",
  "unemp_youth_male_nat",           "Unemployment, youth male (% of male labor force ages 15-24) (national estimate)",
  "unemp_youth_total_milo",         "Unemployment, youth total (% of total labor force ages 15-24) (modeled ILO estimate)",
  "unemp_youth_total_nat",          "Unemployment, youth total (% of total labor force ages 15-24) (national estimate)",
  "vulnerable_emp_female",          "Vulnerable employment, female (% of female employment) (modeled ILO estimate)",
  "vulnerable_emp_male",            "Vulnerable employment, male (% of male employment) (modeled ILO estimate)",
  "vulnerable_emp_total",           "Vulnerable employment, total (% of total employment) (modeled ILO estimate)",
  "wage_workers_female",            "Wage and salaried workers, female (% of female employment) (modeled ILO estimate)",
  "wage_workers_male",              "Wage and salaried workers, male (% of male employment) (modeled ILO estimate)",
  "wage_workers_total",             "Wage and salaried workers, total (% of total employment) (modeled ILO estimate)",
)


# Write the updated codebook to an Excel file
# write_xlsx(codebook, "data/3_codebook_availabledata.xlsx")



```



```{r}
ggplot(data = data_available_clean, mapping = aes(x = year, y = lfpr_total_15_64_milo)) +
  geom_line()+
  facet_wrap(~country_name)


ggplot(data = data_available_clean, mapping = aes(x = year, y = gdp_growth)) +
  geom_line()+
  facet_wrap(~country_name)


ggplot(data = data_available_clean, mapping = aes(x = lfpr_total_15_64_milo, y = gdp_growth)) +
  geom_point()+
  facet_wrap(~country_name)

ggplot(data = data_available_clean, mapping = aes(x = year, y = lfpr_total_15_64_milo)) +
  geom_line()+
  facet_wrap(~country_name)

ggplot(data = data_available_clean, mapping = aes(x = year, y = final_cons_growth)) +
  geom_line()+
  facet_wrap(~country_name)


ggplot(data = data_available_clean, mapping = aes(x = lfpr_total_15_64_milo, y = final_cons_growth)) +
  geom_line()+
  facet_wrap(~country_name)



ggplot(data = data_available_clean, mapping = aes(x = year, y = changes_inventories)) +
  geom_line()+
  facet_wrap(~country_name)


data_available_clean |>
  
ggplot(mapping = aes(x = year, y = cfw_total)) +
  geom_line()+
  facet_wrap(~country_name)


```